<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë©”íƒ€ê³ ë”© ë£°ë ›</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    body {
      background: radial-gradient(circle at center, #e0f7fa, #b2ebf2);
      margin: 0;
      padding: 0;
      font-family: 'Orbitron', sans-serif;
      color: #333;
      overflow-x: hidden;
    }

    .marquee {
      font-size: 3em;
      color: #00796b;
      margin: 20px 0;
      text-align: center;
      animation: blink 1s infinite;
      text-shadow: 0 0 10px #4dd0e1, 0 0 20px #4dd0e1;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .main-layout {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 20px;
    }

    .side-panel {
      width: 20%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .side-panel .led-board {
      font-size: 1.1em;
      color: #00796b;
      background: #e0f2f1;
      border: 2px dashed #4db6ac;
      box-shadow: 0 0 10px #b2dfdb;
      padding: 12px 24px;
      text-align: center;
      border-radius: 15px;
    }

    .center-panel {
      width: 60%;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    .wheel-box {
      position: relative;
      width: 400px;
      height: 400px;
      margin-bottom: 20px;
    }

    .wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 12px solid #fff;
      position: absolute;
      box-shadow: 0 0 30px rgba(0, 150, 136, 0.3), inset 0 0 20px #fff;
    }

    .arrow {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 30px solid #00796b;
      top: -30px;
      left: calc(50% - 20px);
      z-index: 100;
      filter: drop-shadow(0 0 5px #00796b);
    }

    .spin-btn {
      background: linear-gradient(to right, #4fc3f7, #0288d1);
      color: white;
      border: none;
      padding: 18px 36px;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 0 10px #81d4fa;
      border-radius: 12px;
      transition: 0.3s;
    }

    .spin-btn:hover {
      background: #29b6f6;
      transform: scale(1.05);
    }

    #result {
      margin-top: 20px;
      font-size: 24px;
      color: #ffb300;
      text-shadow: 0 0 5px #fff59d;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="marquee">ğŸ’¡ ë©”íƒ€ê³ ë”© ë£°ë › ğŸ’¡</div>

  <div class="main-layout">
    <div class="side-panel">
      <div class="led-board">ğŸŒŸ ì˜¤ëŠ˜ì˜ í–‰ìš´ì€?</div>
      <div class="led-board">ğŸ‰ ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì¦ê²¨ìš”!</div>
      <div class="led-board">ğŸŒˆ ê¸ì • ì—ë„ˆì§€ ë¿œë¿œ!</div>
      <div class="led-board">ğŸŒ€ ë‹¤ì–‘í•œ ìˆ«ìì— ë„ì „!</div>
      <div class="led-board">ğŸˆ ë§¤ì¼ë§¤ì¼ ìƒˆë¡­ê²Œ!</div>
      <div class="led-board">ğŸ’¬ ê²°ê³¼ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”!</div>
      <div class="led-board">ğŸ” ë¬¸ì œ í•´ê²°ì˜ ì²«ê±¸ìŒ!</div>
      <div class="led-board">ğŸ¯ ì§‘ì¤‘ë ¥ ê°•í™” ì‹œê°„!</div>
      <div class="led-board">ğŸ’¡ ì°½ì˜ë ¥ì„ í‚¤ì›Œìš”!</div>
      <div class="led-board">ğŸ“ˆ ì˜¤ëŠ˜ë„ ì„±ì¥í•˜ëŠ” ìš°ë¦¬!</div>
    </div>

    <div class="center-panel">
      <div class="wheel-box">
        <div class="arrow" id="arrow"></div>
        <canvas id="wheelCanvas" class="wheel"></canvas>
      </div>
      <button class="spin-btn" onclick="spinWheel()">ğŸ° ë£°ë › ëŒë¦¬ê¸°</button>
      <h2 id="result"></h2>
    </div>

    <div class="side-panel">
      <div class="led-board">â˜€ï¸ ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨!</div>
      <div class="led-board">ğŸ“š ê³µë¶€ë„ ê²Œì„ì²˜ëŸ¼!</div>
      <div class="led-board">ğŸ’¡ ìƒˆë¡œìš´ ë„ì „ í•´ë³´ì„¸ìš”</div>
      <div class="led-board">âœ¨ ë£°ë ›ì€ ì–¸ì œë‚˜ í™˜ì˜!</div>
      <div class="led-board">ğŸ¨ ì°½ì˜ë ¥ UP!</div>
      <div class="led-board">ğŸš€ í•¨ê»˜ ì„±ì¥í•˜ëŠ” ë©”íƒ€ê³ ë”©!</div>
      <div class="led-board">ğŸ¤ ì¹œêµ¬ì™€ í•¨ê»˜ ë” ì¦ê²ê²Œ!</div>
      <div class="led-board">ğŸ”§ ë„ì „ì€ ê³„ì†ëœë‹¤!</div>
      <div class="led-board">ğŸŒ ë„“ì€ ì„¸ìƒì„ í–¥í•´!</div>
      <div class="led-board">ğŸŠ ì˜¤ëŠ˜ë„ ì‹ ë‚˜ê²Œ ì‹œì‘!</div>
    </div>
  </div>

  <!-- <audio id="spinSound" src="https://www.soundjay.com/mechanical/sounds/mechanical-gear-turning-1.mp3"></audio> -->
  <audio id="spinSound" src="gear-spinning-loop-6981.mp3"></audio>

  <script>
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 400;

    const rawSegments = [
      ...Array(20).fill({ number: 1, color: '#FFF176' }),
      ...Array(10).fill({ number: 3, color: '#AED581' }),
      ...Array(5).fill({ number: 5, color: '#F48FB1' }),
      ...Array(3).fill({ number: 10, color: '#81D4FA' }),
      ...Array(1).fill({ number: 20, color: '#FF8A65' })
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    let segments = shuffle([...rawSegments]);
    let degPerSlice = 360 / segments.length;
    let currentAngle = 0;
    let spinning = false;

    function drawWheel(rotation = 0) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(200, 200);
      ctx.rotate(rotation * Math.PI / 180);
      for (let i = 0; i < segments.length; i++) {
        const startAngle = (i * degPerSlice) * Math.PI / 180;
        const endAngle = ((i + 1) * degPerSlice) * Math.PI / 180;
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.arc(0, 0, 200, startAngle, endAngle);
        ctx.fillStyle = segments[i].color;
        ctx.fill();
        ctx.stroke();

        ctx.save();
        ctx.rotate(startAngle + (endAngle - startAngle) / 2);
        ctx.fillStyle = '#333';
        ctx.font = '16px Orbitron';
        ctx.fillText(segments[i].number, 130, 0);
        ctx.restore();
      }
      ctx.restore();
    }

    drawWheel();

    function spinWheel() {
      if (spinning) return;
      spinning = true;

      const spinSound = document.getElementById('spinSound');
      spinSound.currentTime = 0;
      spinSound.play();

      segments = shuffle([...rawSegments]);
      degPerSlice = 360 / segments.length;

      const randomIndex = Math.floor(Math.random() * segments.length);
      const targetAngle = 360 * 5 + (270 - (randomIndex * degPerSlice + degPerSlice / 2));

      let start = null;

      function animate(timestamp) {
        if (!start) start = timestamp;
        const progress = timestamp - start;
        const easeOut = (t) => 1 - Math.pow(1 - t, 3);

        const duration = 4000;
        const t = Math.min(progress / duration, 1);
        currentAngle = easeOut(t) * targetAngle;

        drawWheel(currentAngle % 360);

        if (t < 1) {
          requestAnimationFrame(animate);
        } else {
          const spinSound = document.getElementById('spinSound');
          spinSound.pause();
          spinSound.currentTime = 0;

          const result = segments[randomIndex];
          document.getElementById('result').innerText = `ğŸ¯ ê²°ê³¼: ${result.number}`;
          spinning = false;
        }
      }

      requestAnimationFrame(animate);
    }
  </script>
</body>
</html>
